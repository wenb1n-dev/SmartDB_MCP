import{u as H}from"./index-81d204e5.js";import{_ as B}from"./_plugin-vue_export-helper-c27b6911.js";import{r as E,c as n,k as L,D as S,o as r,f as a,l as e,q as T,m as b,z as d,t as s,s as _}from"./vendor-7090ffab.js";import"./crypto-c81baed6.js";const A={class:"token-management"},$={class:"token-grid"},R={class:"token-card"},I={class:"card-header"},P={class:"card-title"},z={class:"token-content"},N={class:"token-value-container"},U=["title"],q={key:0,width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},O={key:1,width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},X={class:"token-info"},Z={class:"info-item"},F={class:"info-value"},G={class:"info-item"},J={class:"token-card"},K={class:"card-header"},Q={class:"card-title"},W={class:"token-content"},Y={class:"token-value-container"},ee=["title"],te={key:0,width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},oe={key:1,width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ne={class:"token-info"},se={class:"info-item"},ie={class:"info-value"},re={class:"info-item"},ae={class:"api-examples"},le={class:"example-section"},de={class:"code-block"},ce={class:"code-header"},ue={class:"code-content"},ve={__name:"TokenManagement",setup(ke){const c=H(),l=E({access:"",refresh:"",example:""}),w=n(()=>c.accessToken),u=n(()=>c.refreshToken),v=n(()=>c.accessTokenExpireTime),k=n(()=>c.refreshTokenExpireTime),p=n(()=>new Date(v.value)<new Date),h=n(()=>new Date(k.value)<new Date),y=n(()=>{const o=(new Date(v.value)-new Date)/(1e3*60*60);return o<24&&o>0}),M=n(()=>{const o=(new Date(k.value)-new Date)/(1e3*60*60*24);return o<7&&o>0}),j=n(()=>{if(p.value)return"已过期";const o=new Date(v.value)-new Date,m=Math.floor(o/(1e3*60*60)),g=Math.floor(o%(1e3*60*60)/(1e3*60));return`${m}小时(h) ${g}分钟(m)`}),D=n(()=>{if(h.value)return"已过期";const o=new Date(k.value)-new Date,m=Math.floor(o/(1e3*60*60*24)),g=Math.floor(o%(1e3*60*60*24)/(1e3*60*60));return`${m}天(d) ${g}小时(h)`}),x=n(()=>`curl -X POST http://localhost:3000/mcp/authorize \\
  -H "Content-Type: application/json" \\
  -d '{
    "grant_type": "refresh_token",
    "refresh_token": "${u.value||"your-refresh-token"}",
    "client_id": "smart_db_client_id",
    "client_secret": "smart_db_client_secret"
  }'`);let f=null;const C=async(i,t)=>{try{await navigator.clipboard.writeText(i),l.value[t]="copied",setTimeout(()=>{l.value[t]=""},2e3)}catch(o){console.error("复制失败:",o)}},V=async()=>{try{await c.refreshAccessToken()}catch(i){console.error("刷新Token失败:",i)}};return L(()=>{f=setInterval(()=>{},6e4)}),S(()=>{f&&clearInterval(f)}),(i,t)=>(r(),a("div",A,[e("div",{class:"page-header"},[t[4]||(t[4]=e("div",{class:"header-content"},[e("h2",null,"Token管理"),e("p",null,"管理您的访问令牌和刷新令牌")],-1)),e("div",{class:"header-actions"},[e("button",{class:"btn btn-primary",onClick:V},t[3]||(t[3]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M21 2V8H15",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),e("path",{d:"M3 22V16H9",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),e("path",{d:"M21 8C19.9391 6.93913 18.5 6.5 17 6.5C15.5 6.5 14.0609 6.93913 13 8C11.9391 9.06087 11.5 10.5 11.5 12C11.5 13.5 11.9391 14.9391 13 16C14.0609 17.0609 15.5 17.5 17 17.5C18.5 17.5 19.9391 17.0609 21 16",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),T(" 刷新Token ",-1)]))])]),e("div",$,[e("div",R,[e("div",I,[t[6]||(t[6]=b('<div class="card-icon access-token-icon" data-v-4573b3d4><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-4573b3d4><path d="M12 2L2 7L12 12L22 7L12 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-4573b3d4></path><path d="M2 17L12 22L22 17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-4573b3d4></path><path d="M2 12L12 17L22 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-4573b3d4></path></svg></div>',1)),e("div",P,[t[5]||(t[5]=e("h3",null,"访问令牌（Access Token）",-1)),e("span",{class:d(["token-status",{expired:p.value}])},s(p.value?"已过期":"有效"),3)])]),e("div",z,[e("div",N,[e("div",{class:d(["token-value",{expired:p.value}])},[t[7]||(t[7]=e("span",{class:"auth-prefix"},"Authorization = bearer ",-1)),T(s(w.value||"暂无访问令牌"),1)],2),w.value?(r(),a("button",{key:0,class:"copy-button",onClick:t[0]||(t[0]=o=>C(w.value,"access")),title:l.value.access==="copied"?"已复制":"复制Token"},[l.value.access==="copied"?(r(),a("svg",q,t[8]||(t[8]=[e("polyline",{points:"20,6 9,17 4,12",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]))):(r(),a("svg",O,t[9]||(t[9]=[e("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),e("path",{d:"M5 15H4C3.46957 15 2.96086 14.7893 2.58579 14.4142C2.21071 14.0391 2 13.5304 2 13V4C2 3.46957 2.21071 2.96086 2.58579 2.58579C2.96086 2.21071 3.46957 2 4 2H13C13.5304 2 14.0391 2.21071 14.4142 2.58579C14.7893 2.96086 15 3.46957 15 4V5",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])))],8,U)):_("",!0)]),e("div",X,[e("div",Z,[t[10]||(t[10]=e("span",{class:"info-label"},"过期时间 (Expiration Time):",-1)),e("span",F,s(v.value||"未知"),1)]),e("div",G,[t[11]||(t[11]=e("span",{class:"info-label"},"剩余时间 (Time Remaining):",-1)),e("span",{class:d(["info-value",{warning:y.value}])},s(j.value),3)])])])]),e("div",J,[e("div",K,[t[13]||(t[13]=b('<div class="card-icon refresh-token-icon" data-v-4573b3d4><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-4573b3d4><path d="M21 2V8H15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-4573b3d4></path><path d="M3 22V16H9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-4573b3d4></path><path d="M21 8C19.9391 6.93913 18.5 6.5 17 6.5C15.5 6.5 14.0609 6.93913 13 8C11.9391 9.06087 11.5 10.5 11.5 12C11.5 13.5 11.9391 14.9391 13 16C14.0609 17.0609 15.5 17.5 17 17.5C18.5 17.5 19.9391 17.0609 21 16" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-4573b3d4></path></svg></div>',1)),e("div",Q,[t[12]||(t[12]=e("h3",null,"刷新令牌（Refresh Token）",-1)),e("span",{class:d(["token-status",{expired:h.value}])},s(h.value?"已过期":"有效"),3)])]),e("div",W,[e("div",Y,[e("div",{class:d(["token-value",{expired:h.value}])},s(u.value||"暂无刷新令牌"),3),u.value?(r(),a("button",{key:0,class:"copy-button",onClick:t[1]||(t[1]=o=>C(u.value,"refresh")),title:l.value.refresh==="copied"?"已复制":"复制Token"},[l.value.refresh==="copied"?(r(),a("svg",te,t[14]||(t[14]=[e("polyline",{points:"20,6 9,17 4,12",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]))):(r(),a("svg",oe,t[15]||(t[15]=[e("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),e("path",{d:"M5 15H4C3.46957 15 2.96086 14.7893 2.58579 14.4142C2.21071 14.0391 2 13.5304 2 13V4C2 3.46957 2.21071 2.96086 2.58579 2.58579C2.96086 2.21071 3.46957 2 4 2H13C13.5304 2 14.0391 2.21071 14.4142 2.58579C14.7893 2.96086 15 3.46957 15 4V5",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])))],8,ee)):_("",!0)]),e("div",ne,[e("div",se,[t[16]||(t[16]=e("span",{class:"info-label"},"过期时间 (Expiration Time):",-1)),e("span",ie,s(k.value||"未知"),1)]),e("div",re,[t[17]||(t[17]=e("span",{class:"info-label"},"剩余时间 (Time Remaining):",-1)),e("span",{class:d(["info-value",{warning:M.value}])},s(D.value),3)])])])])]),e("div",ae,[t[21]||(t[21]=e("h3",null,"API使用示例",-1)),e("div",le,[t[20]||(t[20]=e("h4",null,"刷新访问令牌",-1)),e("div",de,[e("div",ce,[t[19]||(t[19]=e("span",null,"cURL",-1)),e("button",{class:"copy-button",onClick:t[2]||(t[2]=o=>C(x.value,"example"))},t[18]||(t[18]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),e("path",{d:"M5 15H4C3.46957 15 2.96086 14.7893 2.58579 14.4142C2.21071 14.0391 2 13.5304 2 13V4C2 3.46957 2.21071 2.96086 2.58579 2.58579C2.96086 2.21071 3.46957 2 4 2H13C13.5304 2 14.0391 2.21071 14.4142 2.58579C14.7893 2.96086 15 3.46957 15 4V5",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]))]),e("pre",ue,s(x.value),1)])])]),t[22]||(t[22]=b('<div class="github-card" data-v-4573b3d4><a href="https://github.com/wenb1n-dev/SmartDB_MCP" target="_blank" class="github-link" data-v-4573b3d4><svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-4573b3d4><path d="M9 19C4 20.5 4 16.5 2 16M16 22V18.13C16.0375 17.6532 15.9731 17.1738 15.811 16.7238C15.6489 16.2738 15.3929 15.8634 15.06 15.52C18.2 15.17 21.5 13.98 21.5 8.52C21.4998 7.12383 21.0627 5.7812 20.2605 4.7038C20.5709 3.5188 20.5274 2.2578 20.13 1.1C20.13 1.1 19.1 0.8 16 2.5C13.38 1.8 10.62 1.8 8 2.5C4.9 0.8 3.87 1.1 3.87 1.1C3.47 2.2578 3.43 3.5188 3.74 4.7038C2.93 5.7812 2.5 7.12383 2.5 8.52C2.5 13.97 5.8 15.16 8.94 15.55C8.611 15.89 8.35726 16.2954 8.19531 16.7399C8.03335 17.1844 7.96681 17.6581 8 18.13V22" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-4573b3d4></path></svg> ⭐️ 如果觉得好用，请帮忙点个 Star 支持一下！ </a></div><div class="additional-content" data-v-4573b3d4><h3 data-v-4573b3d4>使用说明</h3><div class="content-section" data-v-4573b3d4><h4 data-v-4573b3d4>Token 管理说明</h4><p data-v-4573b3d4>这里是关于Token管理的详细说明，包括如何使用访问令牌和刷新令牌，以及如何管理它们的生命周期。</p><h4 data-v-4573b3d4>安全建议</h4><ul data-v-4573b3d4><li data-v-4573b3d4>定期刷新访问令牌</li><li data-v-4573b3d4>不要在客户端代码中硬编码令牌</li><li data-v-4573b3d4>使用HTTPS传输令牌</li><li data-v-4573b3d4>监控令牌的使用情况</li></ul><h4 data-v-4573b3d4>API 集成</h4><p data-v-4573b3d4>将上述cURL命令集成到您的应用程序中，实现自动化的令牌刷新机制。</p><h4 data-v-4573b3d4>故障排除</h4><p data-v-4573b3d4>如果遇到令牌相关的问题，请检查：</p><ul data-v-4573b3d4><li data-v-4573b3d4>令牌是否已过期</li><li data-v-4573b3d4>网络连接是否正常</li><li data-v-4573b3d4>API端点是否正确</li><li data-v-4573b3d4>请求格式是否符合要求</li></ul></div></div>',2))]))}},Ce=B(ve,[["__scopeId","data-v-4573b3d4"]]);export{Ce as default};
