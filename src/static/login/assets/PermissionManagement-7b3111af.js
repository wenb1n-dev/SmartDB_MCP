import{r as u,j as P,o as r,f as l,l as e,q as g,m as f,F as p,y as m,t as a,w as _,n as C,v as b,E as R,s as y,z as L,G as N}from"./vendor-7090ffab.js";import{_ as D}from"./_plugin-vue_export-helper-c27b6911.js";const F={class:"permission-management"},U={class:"page-header"},E={class:"header-actions"},T={class:"permission-grid"},Z={class:"permission-card"},q={class:"roles-list"},z={class:"role-info"},H={class:"role-header"},I={class:"role-description"},G={class:"role-stats"},A={class:"stat"},J={class:"stat"},K={class:"role-actions"},O=["onClick"],Q=["onClick"],W=["onClick"],X={class:"permission-card"},Y={class:"permissions-list"},ee={class:"category-title"},se={class:"permissions-grid"},oe={class:"permission-info"},te={class:"permission-meta"},ne={class:"permission-code"},ie={class:"modal-header"},re={class:"form-group"},le={class:"form-group"},ae={class:"form-group"},de={class:"form-group"},ce={class:"permissions-selector"},ue={class:"category-header"},pe={class:"category-checkbox"},me=["checked","onChange"],ve={class:"permission-items"},ke=["value"],he={class:"form-actions"},Ce=["disabled"],ge={__name:"PermissionManagement",setup(we){const c=u(!1),v=u(null),k=u(!1),t=P({name:"",description:"",level:"user",permissions:[]}),x=u([{id:1,name:"超级管理员",description:"拥有系统所有权限，可以管理所有用户和角色",level:"admin",userCount:1,permissionCount:25},{id:2,name:"系统管理员",description:"可以管理用户、角色和基本系统设置",level:"manager",userCount:3,permissionCount:18},{id:3,name:"普通用户",description:"基本的系统使用权限",level:"user",userCount:15,permissionCount:8}]),h=u([{name:"用户管理",permissions:[{id:"user:read",name:"查看用户",description:"查看用户列表和详情",code:"user:read"},{id:"user:create",name:"创建用户",description:"创建新用户账户",code:"user:create"},{id:"user:update",name:"编辑用户",description:"修改用户信息",code:"user:update"},{id:"user:delete",name:"删除用户",description:"删除用户账户",code:"user:delete"}]},{name:"角色管理",permissions:[{id:"role:read",name:"查看角色",description:"查看角色列表和详情",code:"role:read"},{id:"role:create",name:"创建角色",description:"创建新角色",code:"role:create"},{id:"role:update",name:"编辑角色",description:"修改角色信息",code:"role:update"},{id:"role:delete",name:"删除角色",description:"删除角色",code:"role:delete"}]},{name:"系统管理",permissions:[{id:"system:config",name:"系统配置",description:"管理系统配置",code:"system:config"},{id:"system:log",name:"系统日志",description:"查看系统日志",code:"system:log"},{id:"system:backup",name:"数据备份",description:"执行数据备份",code:"system:backup"}]},{name:"数据库管理",permissions:[{id:"db:read",name:"数据库读取",description:"读取数据库数据",code:"db:read"},{id:"db:write",name:"数据库写入",description:"写入数据库数据",code:"db:write"},{id:"db:delete",name:"数据库删除",description:"删除数据库数据",code:"db:delete"},{id:"db:admin",name:"数据库管理",description:"管理数据库结构",code:"db:admin"}]}]),j=n=>{v.value=n,t.name=n.name,t.description=n.description,t.level=n.level,t.permissions=[],c.value=!0},M=n=>{console.log("查看角色权限:",n)},V=n=>{confirm(`确定要删除角色 "${n.name}" 吗？`)&&console.log("删除角色:",n)},B=async()=>{k.value=!0;try{await new Promise(n=>setTimeout(n,1e3)),console.log("保存角色:",t),c.value=!1,$()}catch(n){console.error("保存失败:",n)}finally{k.value=!1}},$=()=>{v.value=null,t.name="",t.description="",t.level="user",t.permissions=[]},w=n=>{const s=h.value.find(o=>o.name===n);return s?s.permissions.every(o=>t.permissions.includes(o.id)):!1},S=n=>{const s=h.value.find(d=>d.name===n);if(!s)return;const o=s.permissions.map(d=>d.id);w(n)?t.permissions=t.permissions.filter(d=>!o.includes(d)):o.forEach(d=>{t.permissions.includes(d)||t.permissions.push(d)})};return(n,s)=>(r(),l("div",F,[e("div",U,[s[10]||(s[10]=e("div",{class:"header-content"},[e("h2",null,"权限管理"),e("p",null,"管理系统权限和角色分配")],-1)),e("div",E,[e("button",{class:"btn btn-primary",onClick:s[0]||(s[0]=o=>c.value=!0)},s[9]||(s[9]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("line",{x1:"12",y1:"5",x2:"12",y2:"19",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),e("line",{x1:"5",y1:"12",x2:"19",y2:"12",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),g(" 创建角色 ",-1)]))])]),e("div",T,[e("div",Z,[s[13]||(s[13]=f('<div class="card-header" data-v-1a74c66e><div class="card-icon" data-v-1a74c66e><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-1a74c66e><path d="M17 21V19C17 17.9391 16.5786 16.9217 15.8284 16.1716C15.0783 15.4214 14.0609 15 13 15H5C3.93913 15 2.92172 15.4214 2.17157 16.1716C1.42143 16.9217 1 17.9391 1 19V21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-1a74c66e></path><path d="M9 11C11.2091 11 13 9.20914 13 7C13 4.79086 11.2091 3 9 3C6.79086 3 5 4.79086 5 7C5 9.20914 6.79086 11 9 11Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-1a74c66e></path><path d="M23 21V19C22.9993 18.1137 22.7044 17.2528 22.1614 16.5523C21.6184 15.8519 20.8581 15.3516 20 15.13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-1a74c66e></path><path d="M16 3.13C16.8604 3.35031 17.623 3.85071 18.1676 4.55232C18.7122 5.25392 19.0078 6.11683 19.0078 7.005C19.0078 7.89317 18.7122 8.75608 18.1676 9.45768C17.623 10.1593 16.8604 10.6597 16 10.88" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-1a74c66e></path></svg></div><div class="card-title" data-v-1a74c66e><h3 data-v-1a74c66e>角色管理</h3><p data-v-1a74c66e>管理系统角色和权限分配</p></div></div>',1)),e("div",q,[(r(!0),l(p,null,m(x.value,o=>(r(),l("div",{key:o.id,class:"role-item"},[e("div",z,[e("div",H,[e("h4",null,a(o.name),1),e("span",{class:L(["role-badge",o.level])},a(o.level),3)]),e("p",I,a(o.description),1),e("div",G,[e("span",A,[s[11]||(s[11]=e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M17 21V19C17 17.9391 16.5786 16.9217 15.8284 16.1716C15.0783 15.4214 14.0609 15 13 15H5C3.93913 15 2.92172 15.4214 2.17157 16.1716C1.42143 16.9217 1 17.9391 1 19V21",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),e("path",{d:"M9 11C11.2091 11 13 9.20914 13 7C13 4.79086 11.2091 3 9 3C6.79086 3 5 4.79086 5 7C5 9.20914 6.79086 11 9 11Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),g(" "+a(o.userCount)+" 用户 ",1)]),e("span",J,[s[12]||(s[12]=e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M9 12L11 14L15 10",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),e("path",{d:"M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),g(" "+a(o.permissionCount)+" 权限 ",1)])])]),e("div",K,[e("button",{class:"btn btn-secondary",onClick:i=>j(o)}," 编辑 ",8,O),e("button",{class:"btn btn-secondary",onClick:i=>M(o)}," 权限 ",8,Q),o.level!=="admin"?(r(),l("button",{key:0,class:"btn btn-secondary danger",onClick:i=>V(o)}," 删除 ",8,W)):y("",!0)])]))),128))])]),e("div",X,[s[14]||(s[14]=f('<div class="card-header" data-v-1a74c66e><div class="card-icon permission-icon" data-v-1a74c66e><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-1a74c66e><rect x="3" y="11" width="18" height="11" rx="2" ry="2" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-1a74c66e></rect><circle cx="12" cy="16" r="1" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-1a74c66e></circle><path d="M7 11V7C7 5.67392 7.52678 4.40215 8.46447 3.46447C9.40215 2.52678 10.6739 2 12 2C13.3261 2 14.5979 2.52678 15.5355 3.46447C16.4732 4.40215 17 5.67392 17 7V11" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-1a74c66e></path></svg></div><div class="card-title" data-v-1a74c66e><h3 data-v-1a74c66e>权限列表</h3><p data-v-1a74c66e>系统所有可用权限</p></div></div>',1)),e("div",Y,[(r(!0),l(p,null,m(h.value,o=>(r(),l("div",{key:o.name,class:"permission-category"},[e("h4",ee,a(o.name),1),e("div",se,[(r(!0),l(p,null,m(o.permissions,i=>(r(),l("div",{key:i.id,class:"permission-item"},[e("div",oe,[e("h5",null,a(i.name),1),e("p",null,a(i.description),1)]),e("div",te,[e("span",ne,a(i.code),1)])]))),128))])]))),128))])])]),c.value?(r(),l("div",{key:0,class:"modal-overlay",onClick:s[8]||(s[8]=o=>c.value=!1)},[e("div",{class:"modal-content",onClick:s[7]||(s[7]=_(()=>{},["stop"]))},[e("div",ie,[e("h3",null,a(v.value?"编辑角色":"创建角色"),1),e("button",{class:"modal-close",onClick:s[1]||(s[1]=o=>c.value=!1)},s[15]||(s[15]=[e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("line",{x1:"18",y1:"6",x2:"6",y2:"18",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),e("line",{x1:"6",y1:"6",x2:"18",y2:"18",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]))]),e("form",{onSubmit:_(B,["prevent"]),class:"role-form"},[e("div",re,[s[16]||(s[16]=e("label",{for:"roleName",class:"form-label"},"角色名称",-1)),C(e("input",{id:"roleName","onUpdate:modelValue":s[2]||(s[2]=o=>t.name=o),type:"text",class:"form-input",placeholder:"请输入角色名称",required:""},null,512),[[b,t.name]])]),e("div",le,[s[17]||(s[17]=e("label",{for:"roleDescription",class:"form-label"},"角色描述",-1)),C(e("textarea",{id:"roleDescription","onUpdate:modelValue":s[3]||(s[3]=o=>t.description=o),class:"form-input",rows:"3",placeholder:"请输入角色描述"},null,512),[[b,t.description]])]),e("div",ae,[s[19]||(s[19]=e("label",{for:"roleLevel",class:"form-label"},"角色级别",-1)),C(e("select",{id:"roleLevel","onUpdate:modelValue":s[4]||(s[4]=o=>t.level=o),class:"form-input"},s[18]||(s[18]=[e("option",{value:"user"},"普通用户",-1),e("option",{value:"manager"},"管理员",-1),e("option",{value:"admin"},"超级管理员",-1)]),512),[[R,t.level]])]),e("div",de,[s[20]||(s[20]=e("label",{class:"form-label"},"权限分配",-1)),e("div",ce,[(r(!0),l(p,null,m(h.value,o=>(r(),l("div",{key:o.name,class:"permission-category-selector"},[e("div",ue,[e("label",pe,[e("input",{type:"checkbox",checked:w(o.name),onChange:i=>S(o.name)},null,40,me),e("span",null,a(o.name),1)])]),e("div",ve,[(r(!0),l(p,null,m(o.permissions,i=>(r(),l("label",{key:i.id,class:"permission-checkbox"},[C(e("input",{type:"checkbox",value:i.id,"onUpdate:modelValue":s[5]||(s[5]=d=>t.permissions=d)},null,8,ke),[[N,t.permissions]]),e("span",null,a(i.name),1)]))),128))])]))),128))])]),e("div",he,[e("button",{type:"submit",class:"btn btn-primary",disabled:k.value},a(k.value?"保存中...":v.value?"更新角色":"创建角色"),9,Ce),e("button",{type:"button",class:"btn btn-secondary",onClick:s[6]||(s[6]=o=>c.value=!1)}," 取消 ")])],32)])])):y("",!0)]))}},be=D(ge,[["__scopeId","data-v-1a74c66e"]]);export{be as default};
